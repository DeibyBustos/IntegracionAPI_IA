<div class="chat-wrapper">
  <h1>Asistente</h1>

  <div class="modes">
    <label>
      <input
        type="radio"
        name="mode"
        [checked]="mode()==='general'"
        (change)="onMode('general')"
      />
      General
    </label>
    <label>
      <input
        type="radio"
        name="mode"
        [checked]="mode()==='doc'"
        (change)="onMode('doc')"
      />
      Sobre documento
    </label>
  </div>

  <div class="upload" *ngIf="mode()==='doc'">
    <input type="file" (change)="onFile($event)" [disabled]="loading()" />
    <span *ngIf="docName()">ðŸ“„ {{ docName() }} (id: {{ docId() }})</span>
    <p class="hint">Formatos: PDF, DOCX o TXT</p>
  </div>

  <form class="chat-form" (ngSubmit)="send()">
    <input
      type="text"
      [placeholder]="
        mode()==='doc'
          ? 'Pregunta sobre el documentoâ€¦'
          : 'Pregunta generalâ€¦'
      "
      [formControl]="messageCtrl"
    />
    <button
      type="submit"
      [disabled]="loading() || messageCtrl.invalid || (mode()==='doc' && !docId())"
    >
      {{ loading() ? 'Enviandoâ€¦' : 'Enviar' }}
    </button>
  </form>


  <div class="result" *ngIf="reply()">
    <h2>Respuesta</h2>


    <markdown [data]="reply()!"></markdown>


  </div>

  <p class="error" *ngIf="error()">{{ error() }}</p>
</div>
